{"version":3,"sources":["webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/document.service.ts","webpack:///./src/app/search-results.service.ts","webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/search-result.ts","webpack:///./src/environments/environment.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".content, input {\\n\\tmargin: 0 0 0 20px;\\n}\\n\\n.svdSwitch {\\n\\tmargin: 0 0 13px 17px;\\n\\tvertical-align: middle;\\n}\\n\\ninput {\\n\\tfont-family: serif;\\n\\tfont-size: 1.2em;\\n\\tborder: none;\\n}\\n\\ntable {\\n\\tmargin: 10px 0 10px 20px;\\n}\\n\\ntable, th, td {\\n    border: 1px solid black;\\n}\\n\\nul {\\n\\toverflow-y: scroll;\\n\\theight: 550px;\\n\\tlist-style-type: none;\\n\\tpadding: 0;\\n\\tmargin: 15px 0 0 0;\\n\\twidth: 40%;\\n\\tfloat: left;\\n}\\n\\nli div {\\n\\tmargin: 0 0 8px 0;\\n\\tbackground-color: white;\\n\\tpadding: 7px 15px 10px 15px;\\n}\\n\\n.bordered {\\n\\tborder: black;\\n\\tborder-style: solid;\\n\\tborder-width: thick;\\n}\\n\\nli:hover {\\n\\tbox-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\\n}\\n\\nli h2 {\\n\\tmargin: 0 0 4px 0;\\n}\\n\\n.document {\\n\\toverflow-y: scroll;\\n\\theight: 550px;\\n\\twhite-space: pre-wrap;\\n\\tfloat: right;\\n\\twidth: 40%;\\n\\tmargin: 0 15% 0 0;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = 140\n// module chunks = 1","module.exports = \"<div class=\\\"app\\\">\\n\\t<ui-switch [(ngModel)]=\\\"evaluationMode\\\" style=\\\"visibility:visible; position:absolute; right:50px;\\\"></ui-switch>\\n\\t<h1>\\n\\t\\t{{title}}<span *ngIf=\\\"evaluationMode\\\"> (evaluation mode)</span>\\n\\t</h1>\\n\\t<div *ngIf=\\\"!evaluationMode\\\" class=\\\"svdSwitch\\\">Use SVD:&nbsp;<ui-switch [(ngModel)]=\\\"useSVD\\\" size=\\\"small\\\"></ui-switch></div>\\n\\t<input [(ngModel)]=\\\"query\\\" placeholder=\\\"Query\\\" (keyup.enter)=\\\"updateSearchResults(query)\\\">\\n\\t<button (click)=\\\"updateSearchResults(query)\\\">Search</button><span *ngIf=\\\"results\\\">{{results.length}} results</span>\\n\\t<table *ngIf=\\\"evaluationMode\\\">\\n\\t\\t<thead>\\n\\t\\t\\t<th>SVD Avg</th>\\n\\t\\t\\t<th>SVD R</th>\\n\\t\\t\\t<th>VSM Avg</th>\\n\\t\\t\\t<th>VSM R</th>\\n\\t\\t</thead>\\n\\t\\t<tbody>\\n\\t\\t\\t<tr>\\n\\t\\t\\t\\t<td>{{svdAvgPrecision}}</td>\\n\\t\\t\\t\\t<td>{{svdRPrecision}}</td>\\n\\t\\t\\t\\t<td>{{vsmAvgPrecision}}</td>\\n\\t\\t\\t\\t<td>{{vsmRPrecision}}</td>\\n\\t\\t\\t</tr>\\n\\t\\t</tbody>\\n\\t</table>\\n\\t<div class=\\\"content\\\">\\n\\t\\t<ul>\\n\\t\\t\\t<li *ngFor=\\\"let result of results\\\">\\n\\t\\t\\t\\t<div [ngClass]=\\\"{'bordered': result.doc === selected}\\\">\\n\\t\\t\\t\\t\\t<a (click)=\\\"updateDocument(result.doc)\\\">\\n\\t\\t\\t\\t\\t\\t<h2>{{result.doc}}</h2>\\n\\t\\t\\t\\t\\t\\t<p>{{result.rank}}</p>\\n\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t<ui-switch *ngIf=\\\"evaluationMode\\\" (change)=\\\"calculatePrecision($event, result, query)\\\"></ui-switch>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</li>\\n\\t\\t</ul>\\n\\t\\t<div class=\\\"document\\\">\\n\\t\\t\\t{{document}}\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 144\n// module chunks = 1","import { Injectable } from '@angular/core';\nimport { Http } from '@angular/http'\n\nimport 'rxjs/add/operator/toPromise'\n\n@Injectable()\nexport class DocumentService {\n\n\tprivate apiUrl: string = '/api?doc='\n\n  constructor(private http: Http) { }\n\n  getDocument(documentPath: string): Promise<string> {\n    console.log(`Get document ${documentPath}`)\n  \tconst url = `${this.apiUrl}${documentPath}`\n  \treturn this.http.get(url)\n      .toPromise()\n      .then(response => response.text())\n    \t.catch(this.handleError)\n  }\n\n  private handleError(error: any): Promise<any> {\n    return Promise.reject(error.message || error)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/document.service.ts","import { Injectable } from '@angular/core'\nimport { Http } from '@angular/http'\n\nimport 'rxjs/add/operator/toPromise'\n\nimport { SearchResult } from './search-result'\nimport { SEARCH_RESULTS } from './search-results.mock'\n\n@Injectable()\nexport class SearchResultsService {\n\n\tprivate apiUrl: string = '/api?query='\n\n  constructor(private http: Http) { }\n\n  getSearchResults(query: string, withSVD: boolean = true, count?: number): Promise<SearchResult[]> {\n    console.log(`Find documents for: ${query}`)\n  \t// return Promise.resolve(SEARCH_RESULTS)\n    const countString = count ? `&count=${count}` : ''\n\t  const url = `${this.apiUrl}${encodeURI(query)}&svd=${withSVD}${countString}`\n  \treturn this.http.get(url)\n     .toPromise()\n     .then(response => response.json() as SearchResult[])\n     .catch(this.handleError)\n  }\n\n  private handleError(error: any): Promise<any> {\n    return Promise.reject(error.message || error)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/search-results.service.ts","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 76;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 76\n// module chunks = 1","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import { Component } from '@angular/core'\nimport * as P from 'bluebird'\nimport * as _ from 'lodash'\n\nimport { SearchResult } from './search-result'\nimport { SearchResultsService } from './search-results.service'\nimport { DocumentService } from './document.service'\n\nclass ExtendedSearchResult extends SearchResult {\n  relevant: boolean = false\n}\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  private title = 'Latent Semantic Indexing Search'\n  private query: string = null\n  private results: ExtendedSearchResult[] = null\n  private allSVDResults: string[] = null\n  private allVSMResults: string[] = null\n  private selected: string = null\n  private document: string = ''\n  private useSVD: boolean = true\n\n  private evaluationMode = false\n  private svdResults: SearchResult[] = null\n  private vsmResults: SearchResult[] = null\n  private svdRPrecision: number = 0\n  private vsmRPrecision: number = 0\n  private svdAvgPrecision: number = 0\n  private vsmAvgPrecision: number = 0\n\n  constructor(\n    private searchResultService: SearchResultsService,\n    private documentService: DocumentService\n  ) { }\n\n  updateSearchResults(query: string): void {\n    if (!this.evaluationMode) {\n      this.searchResultService.getSearchResults(query, this.useSVD)\n        .then(searchResults => this.results = <ExtendedSearchResult[]> searchResults)\n        .catch(() => {}) // nice error handling tho\n    } else {\n      P.props({\n        svdResults: this.searchResultService.getSearchResults(query, true, 11000),\n        vsmResults: this.searchResultService.getSearchResults(query, false, 11000)\n      }).then((data: any) => {\n          this.allSVDResults = _.map(data.svdResults, ({ doc }) => doc)\n          this.allVSMResults = _.map(data.vsmResults, ({ doc }) => doc)\n          this.results = <ExtendedSearchResult[]> _.unionBy(_.slice(data.svdResults, 0, 10), _.slice(data.vsmResults, 0, 10), 'doc')\n          this.svdResults = data.svdResults\n          this.vsmResults = data.vsmResults\n        })\n    }\n  }\n\n  updateDocument(documentPath: string): void {\n    this.selected = documentPath\n    this.documentService.getDocument(documentPath)\n      .then(document => this.document = document)\n      .catch(() => {})\n  }\n\n  calculatePrecision(event: boolean, result: ExtendedSearchResult, query: string): void {\n    result.relevant = event\n    const relevantDocuments = _.chain(this.results)\n      .groupBy('relevant')\n      .filter((val, key) => key === 'true')\n      .flatten()\n      .map(({ doc }) => doc)\n      .value()\n\n    const rankedDocumentsSVD = this.allSVDResults\n    const rankedDocumentsVSM = this.allVSMResults\n\n    const svdAvgPrecision = this.calculateAvgPrecision(rankedDocumentsSVD, relevantDocuments)\n    const vsmAvgPrecision = this.calculateAvgPrecision(rankedDocumentsVSM, relevantDocuments)\n    const svdRPrecision = this.calculateRPrecision(rankedDocumentsSVD, relevantDocuments)\n    const vsmRPrecision = this.calculateRPrecision(rankedDocumentsVSM, relevantDocuments)\n\n    this.svdAvgPrecision = parseFloat(svdAvgPrecision.toFixed(3))\n    this.vsmAvgPrecision = parseFloat(vsmAvgPrecision.toFixed(3))\n    this.svdRPrecision = parseFloat(svdRPrecision.toFixed(3))\n    this.vsmRPrecision = parseFloat(vsmRPrecision.toFixed(3))\n  }\n\n  private calculateAvgPrecision(rankedDocuments: string[], relevantDocuments: string[]): number {    \n    const sumOfPrecisions = _.chain(rankedDocuments)\n     .map((doc, rank) => ({ doc, rank: rank + 1}))\n     .filter(({ doc }) => _.includes(relevantDocuments, doc))\n     .map(({ rank }, index) => ( (index + 1) / rank ))\n     .tap((array) => {\n        if(array.length !== relevantDocuments.length) {\n          console.log(`Only found ${array.length} relevant documents. Expected ${relevantDocuments.length}.`)\n        }\n     })\n     .sum()\n     .value()\n\n    const precision = sumOfPrecisions / relevantDocuments.length\n    return precision\n  }\n\n  private calculateRPrecision(rankedDocuments: string[], relevantDocuments: string[]): number {\n    if (relevantDocuments.length > rankedDocuments.length) return null\n\n    const slicedRankedDocuments = _.slice(rankedDocuments, 0, relevantDocuments.length)\n    const countTruePositives = _.sumBy(slicedRankedDocuments, doc => _.includes(relevantDocuments, doc))\n\n    const precision = countTruePositives / relevantDocuments.length\n    return precision\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser'\nimport { NgModule } from '@angular/core'\nimport { FormsModule } from '@angular/forms'\nimport { HttpModule } from '@angular/http'\nimport { UiSwitchModule } from 'ng2-ui-switch'\n\nimport { AppComponent } from './app.component'\nimport { SearchResultsService } from './search-results.service'\nimport { DocumentService } from './document.service'\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpModule,\n    UiSwitchModule\n  ],\n  providers: [ \n    SearchResultsService,\n    DocumentService\n  ],\n  bootstrap: [ AppComponent ]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","export class SearchResult {\n\tdoc: string\n\trank: number\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/search-result.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts"],"sourceRoot":""}