{"version":3,"sources":["webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/document.service.ts","webpack:///./src/app/search-results.service.ts","webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/search-result.ts","webpack:///./src/environments/environment.ts"],"names":[],"mappings":";;;;;AAAA;AACA;;;AAGA;AACA,0CAA2C,yBAAyB,KAAK,oBAAoB,4BAA4B,6BAA6B,KAAK,eAAe,yBAAyB,uBAAuB,mBAAmB,KAAK,eAAe,+BAA+B,KAAK,uBAAuB,gCAAgC,KAAK,YAAY,yBAAyB,oBAAoB,4BAA4B,iBAAiB,yBAAyB,iBAAiB,kBAAkB,KAAK,gBAAgB,wBAAwB,8BAA8B,kCAAkC,KAAK,mBAAmB,oBAAoB,0BAA0B,0BAA0B,KAAK,kBAAkB,gDAAgD,KAAK,eAAe,wBAAwB,KAAK,mBAAmB,yBAAyB,oBAAoB,4BAA4B,mBAAmB,iBAAiB,wBAAwB,KAAK;;AAEr+B;;;AAGA;AACA,2C;;;;;;;ACXA,gHAAgH,mBAAmB,YAAY,mCAAmC,OAAO,0IAA0I,uQAAuQ,gBAAgB,uOAAuO,iBAAiB,uBAAuB,eAAe,uBAAuB,iBAAiB,uBAAuB,eAAe,wKAAwK,oCAAoC,iFAAiF,YAAY,0BAA0B,aAAa,qOAAqO,UAAU,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA19C;AACP;AAEA;AAGpC,IAAa,eAAe;IAI1B,yBAAoB,IAAU;QAAV,SAAI,GAAJ,IAAI,CAAM;QAFvB,WAAM,GAAW,WAAW;IAED,CAAC;IAEnC,qCAAW,GAAX,UAAY,YAAoB;QAC9B,OAAO,CAAC,GAAG,CAAC,kBAAgB,YAAc,CAAC;QAC5C,IAAM,GAAG,GAAG,KAAG,IAAI,CAAC,MAAM,GAAG,YAAc;QAC3C,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;aACrB,SAAS,EAAE;aACX,IAAI,CAAC,kBAAQ,IAAI,eAAQ,CAAC,IAAI,EAAE,EAAf,CAAe,CAAC;aAClC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC;IAC3B,CAAC;IAEO,qCAAW,GAAnB,UAAoB,KAAU;QAC5B,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC;IAC/C,CAAC;IACH,sBAAC;AAAD,CAAC;AAlBY,eAAe;IAD3B,wFAAU,EAAE;yDAKe,2DAAI,oBAAJ,2DAAI;GAJnB,eAAe,CAkB3B;AAlB2B;;;;;;;;;;;;;;;;;;;;;;;;ACNc;AACN;AAEA;AAMpC,IAAa,oBAAoB;IAI/B,8BAAoB,IAAU;QAAV,SAAI,GAAJ,IAAI,CAAM;QAFvB,WAAM,GAAW,aAAa;IAEH,CAAC;IAEnC,+CAAgB,GAAhB,UAAiB,KAAa,EAAE,OAAuB,EAAE,KAAc;QAAvC,wCAAuB;QACrD,OAAO,CAAC,GAAG,CAAC,yBAAuB,KAAO,CAAC;QAC5C,yCAAyC;QACxC,IAAM,WAAW,GAAG,KAAK,GAAG,YAAU,KAAO,GAAG,EAAE;QACnD,IAAM,GAAG,GAAG,KAAG,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,KAAK,CAAC,aAAQ,OAAO,GAAG,WAAa;QAC5E,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;aACtB,SAAS,EAAE;aACX,IAAI,CAAC,kBAAQ,IAAI,eAAQ,CAAC,IAAI,EAAoB,EAAjC,CAAiC,CAAC;aACnD,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC;IAC3B,CAAC;IAEO,0CAAW,GAAnB,UAAoB,KAAU;QAC5B,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC;IAC/C,CAAC;IACH,2BAAC;AAAD,CAAC;AApBY,oBAAoB;IADhC,wFAAU,EAAE;yDAKe,2DAAI,oBAAJ,2DAAI;GAJnB,oBAAoB,CAoBhC;AApBgC;;;;;;;;;ACTjC;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;;;;;;;;;;;;;;ACN+C;AAC4B;AAE9B;AACY;AAEzD,EAAE,CAAC,CAAC,8EAAW,CAAC,UAAU,CAAC,CAAC,CAAC;IAC3B,4FAAc,EAAE,CAAC;AACnB,CAAC;AAED,wHAAsB,EAAE,CAAC,eAAe,CAAC,kEAAS,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVX;AACZ;AACF;AAEmB;AACiB;AACX;AAEpD;IAAmC,wCAAY;IAA/C;QAAA,qEAEC;QADC,cAAQ,GAAY,KAAK;;IAC3B,CAAC;IAAD,2BAAC;AAAD,CAAC,CAFkC,oEAAY,GAE9C;AAOD,IAAa,YAAY;IAkBvB,sBACU,mBAAyC,EACzC,eAAgC;QADhC,wBAAmB,GAAnB,mBAAmB,CAAsB;QACzC,oBAAe,GAAf,eAAe,CAAiB;QAnBlC,UAAK,GAAG,iCAAiC;QACzC,UAAK,GAAW,IAAI;QACpB,YAAO,GAA2B,IAAI;QACtC,kBAAa,GAAa,IAAI;QAC9B,kBAAa,GAAa,IAAI;QAC9B,aAAQ,GAAW,IAAI;QACvB,aAAQ,GAAW,EAAE;QACrB,WAAM,GAAY,IAAI;QAEtB,mBAAc,GAAG,KAAK;QACtB,eAAU,GAAmB,IAAI;QACjC,eAAU,GAAmB,IAAI;QACjC,kBAAa,GAAW,CAAC;QACzB,kBAAa,GAAW,CAAC;QACzB,oBAAe,GAAW,CAAC;QAC3B,oBAAe,GAAW,CAAC;IAK/B,CAAC;IAEL,0CAAmB,GAAnB,UAAoB,KAAa;QAAjC,iBAiBC;QAhBC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC;iBAC1D,IAAI,CAAC,uBAAa,IAAI,YAAI,CAAC,OAAO,GAA4B,aAAa,EAArD,CAAqD,CAAC;iBAC5E,KAAK,CAAC,cAAO,CAAC,CAAC,EAAC,0BAA0B;QAC/C,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,+CAAO,CAAC;gBACN,UAAU,EAAE,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,CAAC;gBACzE,UAAU,EAAE,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;aAC3E,CAAC,CAAC,IAAI,CAAC,UAAC,IAAS;gBACd,KAAI,CAAC,aAAa,GAAG,2CAAK,CAAC,IAAI,CAAC,UAAU,EAAE,UAAC,EAAO;wBAAL,YAAG;oBAAO,UAAG;gBAAH,CAAG,CAAC;gBAC7D,KAAI,CAAC,aAAa,GAAG,2CAAK,CAAC,IAAI,CAAC,UAAU,EAAE,UAAC,EAAO;wBAAL,YAAG;oBAAO,UAAG;gBAAH,CAAG,CAAC;gBAC7D,KAAI,CAAC,OAAO,GAA4B,+CAAS,CAAC,+CAAS,CAAC,6CAAO,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,6CAAO,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;gBACrI,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU;gBACjC,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU;YACnC,CAAC,CAAC;QACN,CAAC;IACH,CAAC;IAED,qCAAc,GAAd,UAAe,YAAoB;QAAnC,iBAKC;QAJC,IAAI,CAAC,QAAQ,GAAG,YAAY;QAC5B,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,YAAY,CAAC;aAC3C,IAAI,CAAC,kBAAQ,IAAI,YAAI,CAAC,QAAQ,GAAG,QAAQ,EAAxB,CAAwB,CAAC;aAC1C,KAAK,CAAC,cAAO,CAAC,CAAC;IACpB,CAAC;IAED,yCAAkB,GAAlB,UAAmB,KAAc,EAAE,MAA4B,EAAE,KAAa;QAC5E,MAAM,CAAC,QAAQ,GAAG,KAAK;QACvB,IAAM,iBAAiB,GAAG,6CAAO,CAAC,IAAI,CAAC,OAAO,CAAC;aAC5C,OAAO,CAAC,UAAU,CAAC;aACnB,MAAM,CAAC,UAAC,GAAG,EAAE,GAAG,IAAK,UAAG,KAAK,MAAM,EAAd,CAAc,CAAC;aACpC,OAAO,EAAE;aACT,GAAG,CAAC,UAAC,EAAO;gBAAL,YAAG;YAAO,UAAG;QAAH,CAAG,CAAC;aACrB,KAAK,EAAE;QAEV,IAAM,kBAAkB,GAAG,IAAI,CAAC,aAAa;QAC7C,IAAM,kBAAkB,GAAG,IAAI,CAAC,aAAa;QAE7C,IAAM,eAAe,GAAG,IAAI,CAAC,qBAAqB,CAAC,kBAAkB,EAAE,iBAAiB,CAAC;QACzF,IAAM,eAAe,GAAG,IAAI,CAAC,qBAAqB,CAAC,kBAAkB,EAAE,iBAAiB,CAAC;QACzF,IAAM,aAAa,GAAG,IAAI,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,iBAAiB,CAAC;QACrF,IAAM,aAAa,GAAG,IAAI,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,iBAAiB,CAAC;QAErF,IAAI,CAAC,eAAe,GAAG,UAAU,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAC7D,IAAI,CAAC,eAAe,GAAG,UAAU,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAC7D,IAAI,CAAC,aAAa,GAAG,UAAU,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACzD,IAAI,CAAC,aAAa,GAAG,UAAU,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3D,CAAC;IAEO,4CAAqB,GAA7B,UAA8B,eAAyB,EAAE,iBAA2B;QAClF,IAAM,eAAe,GAAG,6CAAO,CAAC,eAAe,CAAC;aAC9C,GAAG,CAAC,UAAC,GAAG,EAAE,IAAI,IAAK,QAAC,EAAE,GAAG,OAAE,IAAI,EAAE,IAAI,GAAG,CAAC,EAAC,CAAC,EAAxB,CAAwB,CAAC;aAC5C,MAAM,CAAC,UAAC,EAAO;gBAAL,YAAG;YAAO,uDAAU,CAAC,iBAAiB,EAAE,GAAG,CAAC;QAAlC,CAAkC,CAAC;aACvD,GAAG,CAAC,UAAC,EAAQ,EAAE,KAAK;gBAAb,cAAI;YAAc,QAAE,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI,CAAE;QAAtB,CAAsB,CAAC;aAChD,GAAG,CAAC,UAAC,KAAK;YACR,EAAE,EAAC,KAAK,CAAC,MAAM,KAAK,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC7C,OAAO,CAAC,GAAG,CAAC,gBAAc,KAAK,CAAC,MAAM,sCAAiC,iBAAiB,CAAC,MAAM,MAAG,CAAC;YACrG,CAAC;QACJ,CAAC,CAAC;aACD,GAAG,EAAE;aACL,KAAK,EAAE;QAET,IAAM,SAAS,GAAG,eAAe,GAAG,iBAAiB,CAAC,MAAM;QAC5D,MAAM,CAAC,SAAS;IAClB,CAAC;IAEO,0CAAmB,GAA3B,UAA4B,eAAyB,EAAE,iBAA2B;QAChF,EAAE,CAAC,CAAC,iBAAiB,CAAC,MAAM,GAAG,eAAe,CAAC,MAAM,CAAC;YAAC,MAAM,CAAC,IAAI;QAElE,IAAM,qBAAqB,GAAG,6CAAO,CAAC,eAAe,EAAE,CAAC,EAAE,iBAAiB,CAAC,MAAM,CAAC;QACnF,IAAM,kBAAkB,GAAG,6CAAO,CAAC,qBAAqB,EAAE,aAAG,IAAI,uDAAU,CAAC,iBAAiB,EAAE,GAAG,CAAC,EAAlC,CAAkC,CAAC;QAEpG,IAAM,SAAS,GAAG,kBAAkB,GAAG,iBAAiB,CAAC,MAAM;QAC/D,MAAM,CAAC,SAAS;IAClB,CAAC;IAEH,mBAAC;AAAD,CAAC;AAnGY,YAAY;IALxB,wFAAS,CAAC;QACT,QAAQ,EAAE,UAAU;QACpB,kCAAmC;QACnC,kCAAkC;KACnC,CAAC;yDAoB+B,qFAAoB,oBAApB,qFAAoB,sDACxB,0EAAe,oBAAf,0EAAe;GApB/B,YAAY,CAmGxB;AAnGwB;;;;;;;;;;;;;;;;;;;;;;;;;ACjBgC;AACjB;AACI;AACF;AACI;AAEA;AACiB;AACX;AAkBpD,IAAa,SAAS;IAAtB;IAAyB,CAAC;IAAD,gBAAC;AAAD,CAAC;AAAb,SAAS;IAhBrB,sFAAQ,CAAC;QACR,YAAY,EAAE;YACZ,oEAAY;SACb;QACD,OAAO,EAAE;YACP,gFAAa;YACb,mEAAW;YACX,iEAAU;YACV,qEAAc;SACf;QACD,SAAS,EAAE;YACT,qFAAoB;YACpB,0EAAe;SAChB;QACD,SAAS,EAAE,CAAE,oEAAY,CAAE;KAC5B,CAAC;GACW,SAAS,CAAI;AAAJ;;;;;;;;;AC1BtB;AAAA;IAAA;IAGA,CAAC;IAAD,mBAAC;AAAD,CAAC;;;;;;;;;;ACHD;AAAA,mFAAmF;AACnF,8FAA8F;AAC9F,yEAAyE;AACzE,gFAAgF;AAEhF,mFALmF;AAK5E,IAAM,WAAW,GAAG;IACzB,UAAU,EAAE,KAAK;CAClB,CAAC","file":"main.bundle.js","sourcesContent":["exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".content, input {\\r\\n\\tmargin: 0 0 0 20px;\\r\\n}\\r\\n\\r\\n.svdSwitch {\\r\\n\\tmargin: 0 0 13px 17px;\\r\\n\\tvertical-align: middle;\\r\\n}\\r\\n\\r\\ninput {\\r\\n\\tfont-family: serif;\\r\\n\\tfont-size: 1.2em;\\r\\n\\tborder: none;\\r\\n}\\r\\n\\r\\ntable {\\r\\n\\tmargin: 10px 0 10px 20px;\\r\\n}\\r\\n\\r\\ntable, th, td {\\r\\n    border: 1px solid black;\\r\\n}\\r\\n\\r\\nul {\\r\\n\\toverflow-y: scroll;\\r\\n\\theight: 550px;\\r\\n\\tlist-style-type: none;\\r\\n\\tpadding: 0;\\r\\n\\tmargin: 15px 0 0 0;\\r\\n\\twidth: 40%;\\r\\n\\tfloat: left;\\r\\n}\\r\\n\\r\\nli div {\\r\\n\\tmargin: 0 0 8px 0;\\r\\n\\tbackground-color: white;\\r\\n\\tpadding: 7px 15px 10px 15px;\\r\\n}\\r\\n\\r\\n.bordered {\\r\\n\\tborder: black;\\r\\n\\tborder-style: solid;\\r\\n\\tborder-width: thick;\\r\\n}\\r\\n\\r\\nli:hover {\\r\\n\\tbox-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\nli h2 {\\r\\n\\tmargin: 0 0 4px 0;\\r\\n}\\r\\n\\r\\n.document {\\r\\n\\toverflow-y: scroll;\\r\\n\\theight: 550px;\\r\\n\\twhite-space: pre-wrap;\\r\\n\\tfloat: right;\\r\\n\\twidth: 40%;\\r\\n\\tmargin: 0 15% 0 0;\\r\\n}\\r\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = 140\n// module chunks = 1","module.exports = \"<div class=\\\"app\\\">\\r\\n\\t<ui-switch [(ngModel)]=\\\"evaluationMode\\\" style=\\\"visibility:visible; position:absolute; right:50px;\\\"></ui-switch>\\r\\n\\t<h1>\\r\\n\\t\\t{{title}}<span *ngIf=\\\"evaluationMode\\\"> (evaluation mode)</span>\\r\\n\\t</h1>\\r\\n\\t<div *ngIf=\\\"!evaluationMode\\\" class=\\\"svdSwitch\\\">Use SVD:&nbsp;<ui-switch [(ngModel)]=\\\"useSVD\\\" size=\\\"small\\\"></ui-switch></div>\\r\\n\\t<input [(ngModel)]=\\\"query\\\" placeholder=\\\"Query\\\" (keyup.enter)=\\\"updateSearchResults(query)\\\">\\r\\n\\t<button (click)=\\\"updateSearchResults(query)\\\">Search</button><span *ngIf=\\\"results\\\">{{results.length}} results</span>\\r\\n\\t<table *ngIf=\\\"evaluationMode\\\">\\r\\n\\t\\t<thead>\\r\\n\\t\\t\\t<th>SVD Avg</th>\\r\\n\\t\\t\\t<th>SVD R</th>\\r\\n\\t\\t\\t<th>VSM Avg</th>\\r\\n\\t\\t\\t<th>VSM R</th>\\r\\n\\t\\t</thead>\\r\\n\\t\\t<tbody>\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<td>{{svdAvgPrecision}}</td>\\r\\n\\t\\t\\t\\t<td>{{svdRPrecision}}</td>\\r\\n\\t\\t\\t\\t<td>{{vsmAvgPrecision}}</td>\\r\\n\\t\\t\\t\\t<td>{{vsmRPrecision}}</td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t</tbody>\\r\\n\\t</table>\\r\\n\\t<div class=\\\"content\\\">\\r\\n\\t\\t<ul>\\r\\n\\t\\t\\t<li *ngFor=\\\"let result of results\\\">\\r\\n\\t\\t\\t\\t<div [ngClass]=\\\"{'bordered': result.doc === selected}\\\">\\r\\n\\t\\t\\t\\t\\t<a (click)=\\\"updateDocument(result.doc)\\\">\\r\\n\\t\\t\\t\\t\\t\\t<h2>{{result.doc}}</h2>\\r\\n\\t\\t\\t\\t\\t\\t<p>{{result.rank}}</p>\\r\\n\\t\\t\\t\\t\\t</a>\\r\\n\\t\\t\\t\\t\\t<ui-switch *ngIf=\\\"evaluationMode\\\" (change)=\\\"calculatePrecision($event, result, query)\\\"></ui-switch>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</li>\\r\\n\\t\\t</ul>\\r\\n\\t\\t<div class=\\\"document\\\">\\r\\n\\t\\t\\t{{document}}\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 144\n// module chunks = 1","import { Injectable } from '@angular/core';\r\nimport { Http } from '@angular/http'\r\n\r\nimport 'rxjs/add/operator/toPromise'\r\n\r\n@Injectable()\r\nexport class DocumentService {\r\n\r\n\tprivate apiUrl: string = '/api?doc='\r\n\r\n  constructor(private http: Http) { }\r\n\r\n  getDocument(documentPath: string): Promise<string> {\r\n    console.log(`Get document ${documentPath}`)\r\n  \tconst url = `${this.apiUrl}${documentPath}`\r\n  \treturn this.http.get(url)\r\n      .toPromise()\r\n      .then(response => response.text())\r\n    \t.catch(this.handleError)\r\n  }\r\n\r\n  private handleError(error: any): Promise<any> {\r\n    return Promise.reject(error.message || error)\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/document.service.ts","import { Injectable } from '@angular/core'\r\nimport { Http } from '@angular/http'\r\n\r\nimport 'rxjs/add/operator/toPromise'\r\n\r\nimport { SearchResult } from './search-result'\r\nimport { SEARCH_RESULTS } from './search-results.mock'\r\n\r\n@Injectable()\r\nexport class SearchResultsService {\r\n\r\n\tprivate apiUrl: string = '/api?query='\r\n\r\n  constructor(private http: Http) { }\r\n\r\n  getSearchResults(query: string, withSVD: boolean = true, count?: number): Promise<SearchResult[]> {\r\n    console.log(`Find documents for: ${query}`)\r\n  \t// return Promise.resolve(SEARCH_RESULTS)\r\n    const countString = count ? `&count=${count}` : ''\r\n\t  const url = `${this.apiUrl}${encodeURI(query)}&svd=${withSVD}${countString}`\r\n  \treturn this.http.get(url)\r\n     .toPromise()\r\n     .then(response => response.json() as SearchResult[])\r\n     .catch(this.handleError)\r\n  }\r\n\r\n  private handleError(error: any): Promise<any> {\r\n    return Promise.reject(error.message || error)\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/search-results.service.ts","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 76;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 76\n// module chunks = 1","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import { Component } from '@angular/core'\r\nimport * as P from 'bluebird'\r\nimport * as _ from 'lodash'\r\n\r\nimport { SearchResult } from './search-result'\r\nimport { SearchResultsService } from './search-results.service'\r\nimport { DocumentService } from './document.service'\r\n\r\nclass ExtendedSearchResult extends SearchResult {\r\n  relevant: boolean = false\r\n}\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  private title = 'Latent Semantic Indexing Search'\r\n  private query: string = null\r\n  private results: ExtendedSearchResult[] = null\r\n  private allSVDResults: string[] = null\r\n  private allVSMResults: string[] = null\r\n  private selected: string = null\r\n  private document: string = ''\r\n  private useSVD: boolean = true\r\n\r\n  private evaluationMode = false\r\n  private svdResults: SearchResult[] = null\r\n  private vsmResults: SearchResult[] = null\r\n  private svdRPrecision: number = 0\r\n  private vsmRPrecision: number = 0\r\n  private svdAvgPrecision: number = 0\r\n  private vsmAvgPrecision: number = 0\r\n\r\n  constructor(\r\n    private searchResultService: SearchResultsService,\r\n    private documentService: DocumentService\r\n  ) { }\r\n\r\n  updateSearchResults(query: string): void {\r\n    if (!this.evaluationMode) {\r\n      this.searchResultService.getSearchResults(query, this.useSVD)\r\n        .then(searchResults => this.results = <ExtendedSearchResult[]> searchResults)\r\n        .catch(() => {}) // nice error handling tho\r\n    } else {\r\n      P.props({\r\n        svdResults: this.searchResultService.getSearchResults(query, true, 11000),\r\n        vsmResults: this.searchResultService.getSearchResults(query, false, 11000)\r\n      }).then((data: any) => {\r\n          this.allSVDResults = _.map(data.svdResults, ({ doc }) => doc)\r\n          this.allVSMResults = _.map(data.vsmResults, ({ doc }) => doc)\r\n          this.results = <ExtendedSearchResult[]> _.shuffle(_.unionBy(_.slice(data.svdResults, 0, 10), _.slice(data.vsmResults, 0, 10), 'doc'))\r\n          this.svdResults = data.svdResults\r\n          this.vsmResults = data.vsmResults\r\n        })\r\n    }\r\n  }\r\n\r\n  updateDocument(documentPath: string): void {\r\n    this.selected = documentPath\r\n    this.documentService.getDocument(documentPath)\r\n      .then(document => this.document = document)\r\n      .catch(() => {})\r\n  }\r\n\r\n  calculatePrecision(event: boolean, result: ExtendedSearchResult, query: string): void {\r\n    result.relevant = event\r\n    const relevantDocuments = _.chain(this.results)\r\n      .groupBy('relevant')\r\n      .filter((val, key) => key === 'true')\r\n      .flatten()\r\n      .map(({ doc }) => doc)\r\n      .value()\r\n\r\n    const rankedDocumentsSVD = this.allSVDResults\r\n    const rankedDocumentsVSM = this.allVSMResults\r\n\r\n    const svdAvgPrecision = this.calculateAvgPrecision(rankedDocumentsSVD, relevantDocuments)\r\n    const vsmAvgPrecision = this.calculateAvgPrecision(rankedDocumentsVSM, relevantDocuments)\r\n    const svdRPrecision = this.calculateRPrecision(rankedDocumentsSVD, relevantDocuments)\r\n    const vsmRPrecision = this.calculateRPrecision(rankedDocumentsVSM, relevantDocuments)\r\n\r\n    this.svdAvgPrecision = parseFloat(svdAvgPrecision.toFixed(3))\r\n    this.vsmAvgPrecision = parseFloat(vsmAvgPrecision.toFixed(3))\r\n    this.svdRPrecision = parseFloat(svdRPrecision.toFixed(3))\r\n    this.vsmRPrecision = parseFloat(vsmRPrecision.toFixed(3))\r\n  }\r\n\r\n  private calculateAvgPrecision(rankedDocuments: string[], relevantDocuments: string[]): number {    \r\n    const sumOfPrecisions = _.chain(rankedDocuments)\r\n     .map((doc, rank) => ({ doc, rank: rank + 1}))\r\n     .filter(({ doc }) => _.includes(relevantDocuments, doc))\r\n     .map(({ rank }, index) => ( (index + 1) / rank ))\r\n     .tap((array) => {\r\n        if(array.length !== relevantDocuments.length) {\r\n          console.log(`Only found ${array.length} relevant documents. Expected ${relevantDocuments.length}.`)\r\n        }\r\n     })\r\n     .sum()\r\n     .value()\r\n\r\n    const precision = sumOfPrecisions / relevantDocuments.length\r\n    return precision\r\n  }\r\n\r\n  private calculateRPrecision(rankedDocuments: string[], relevantDocuments: string[]): number {\r\n    if (relevantDocuments.length > rankedDocuments.length) return null\r\n\r\n    const slicedRankedDocuments = _.slice(rankedDocuments, 0, relevantDocuments.length)\r\n    const countTruePositives = _.sumBy(slicedRankedDocuments, doc => _.includes(relevantDocuments, doc))\r\n\r\n    const precision = countTruePositives / relevantDocuments.length\r\n    return precision\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser'\r\nimport { NgModule } from '@angular/core'\r\nimport { FormsModule } from '@angular/forms'\r\nimport { HttpModule } from '@angular/http'\r\nimport { UiSwitchModule } from 'ng2-ui-switch'\r\n\r\nimport { AppComponent } from './app.component'\r\nimport { SearchResultsService } from './search-results.service'\r\nimport { DocumentService } from './document.service'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    FormsModule,\r\n    HttpModule,\r\n    UiSwitchModule\r\n  ],\r\n  providers: [ \r\n    SearchResultsService,\r\n    DocumentService\r\n  ],\r\n  bootstrap: [ AppComponent ]\r\n})\r\nexport class AppModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","export class SearchResult {\r\n\tdoc: string\r\n\trank: number\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/search-result.ts","// The file contents for the current environment will overwrite these during build.\r\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\r\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\r\n// The list of which env maps to which file can be found in `.angular-cli.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts"],"sourceRoot":""}